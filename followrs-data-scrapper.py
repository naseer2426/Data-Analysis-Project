from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.chrome.options import Options
import csv

# driver = webdriver.Chrome()

links = ["https://www.instagram.com/shxkir.ibrxhim","https://www.instagram.com/_codehub_","https://www.instagram.com/nazri.in","https://www.instagram.com/lzc_97","https://www.instagram.com/ahhhhying","https://www.instagram.com/adityakantidatta","https://www.instagram.com/__.harini_ramki.__","https://www.instagram.com/avgupta16","https://www.instagram.com/krish0509","https://www.instagram.com/darkpandawarrior","https://www.instagram.com/aks.tayal","https://www.instagram.com/little_angry_ghost","https://www.instagram.com/gabybenedicta","https://www.instagram.com/munmit_sd","https://www.instagram.com/s.a.a.raj","https://www.instagram.com/ishan409","https://www.instagram.com/gopal_agarwal19","https://www.instagram.com/ankiithaaaaaa","https://www.instagram.com/shreezy69","https://www.instagram.com/atulsan.xo","https://www.instagram.com/aryamanshaan","https://www.instagram.com/abdullahk.khan","https://www.instagram.com/itsarjundk","https://www.instagram.com/rahulroy281998","https://www.instagram.com/aanch_10","https://www.instagram.com/jarvis_vn","https://www.instagram.com/__shinaz","https://www.instagram.com/masterofpipettes","https://www.instagram.com/anudeepayina","https://www.instagram.com/weebplug","https://www.instagram.com/clarenceckw","https://www.instagram.com/_astha_garg","https://www.instagram.com/mich.elle.lee","https://www.instagram.com/thatnicneo","https://www.instagram.com/pratyumj","https://www.instagram.com/alfredhhw","https://www.instagram.com/arwengutdem","https://www.instagram.com/kanurol","https://www.instagram.com/jsingh11","https://www.instagram.com/rohang_yall","https://www.instagram.com/nikitha.venu","https://www.instagram.com/a.xjun","https://www.instagram.com/devi_creates","https://www.instagram.com/shrutilayantu","https://www.instagram.com/dhruvperiwal","https://www.instagram.com/amruthraghav","https://www.instagram.com/chiraxg","https://www.instagram.com/srishti.arora16","https://www.instagram.com/aditya_chandrasekhar","https://www.instagram.com/26.sdidt","https://www.instagram.com/_samarth8_","https://www.instagram.com/tarang_singapore","https://www.instagram.com/pubity","https://www.instagram.com/alecbenjamin","https://www.instagram.com/pooriii09","https://www.instagram.com/shivanshmittall","https://www.instagram.com/shlok.jain","https://www.instagram.com/fallinginsociety","https://www.instagram.com/memedeliveryguyy","https://www.instagram.com/nugget","https://www.instagram.com/couplesnote","https://www.instagram.com/vr23_artworks","https://www.instagram.com/hasanminhaj","https://www.instagram.com/_bijun_","https://www.instagram.com/tanush_seshadri","https://www.instagram.com/pranayp_10","https://www.instagram.com/ssiddesh7","https://www.instagram.com/anushkaa1910","https://www.instagram.com/varshatheguru","https://www.instagram.com/shreya09milo","https://www.instagram.com/ghantaa","https://www.instagram.com/divyasirurmath","https://www.instagram.com/matpatgt","https://www.instagram.com/samyu976","https://www.instagram.com/jk55752522001","https://www.instagram.com/the.realshit.gyan","https://www.instagram.com/titisha.kushwaha","https://www.instagram.com/dankstories","https://www.instagram.com/kennethseb","https://www.instagram.com/sonakshirohra","https://www.instagram.com/harsh._.3563","https://www.instagram.com/mydarlingmyla","https://www.instagram.com/gunsimar","https://www.instagram.com/tharakan.captures","https://www.instagram.com/kanishk.sr","https://www.instagram.com/classicalfuck","https://www.instagram.com/ntu_sikhsociety","https://www.instagram.com/ntu_debsoc","https://www.instagram.com/thunderbirds.mp3","https://www.instagram.com/happybirthdaylilkavs","https://www.instagram.com/rohith_warrier","https://www.instagram.com/swethasakthi_","https://www.instagram.com/ntuindiandance","https://www.instagram.com/milaap.2019","https://www.instagram.com/jp_gan","https://www.instagram.com/andrew_foy_","https://www.instagram.com/carrolllllllllllllll","https://www.instagram.com/shermgermz","https://www.instagram.com/procrastin8r_anim8r","https://www.instagram.com/rosemary.44","https://www.instagram.com/thatfingerstyleguitarist","https://www.instagram.com/arcadier","https://www.instagram.com/robertdowneyjr","https://www.instagram.com/tanvibaldewa","https://www.instagram.com/jokezar","https://www.instagram.com/richard_anton98","https://www.instagram.com/ishan_mital","https://www.instagram.com/alenreuel","https://www.instagram.com/saumay__","https://www.instagram.com/bhatia.ritik5","https://www.instagram.com/charanpals","https://www.instagram.com/_jaswanth_08","https://www.instagram.com/saipallavi.senthamarai","https://www.instagram.com/mathpranay","https://www.instagram.com/vanibembey","https://www.instagram.com/mona_chowdary_sai","https://www.instagram.com/bluesmav","https://www.instagram.com/devasriturakhia","https://www.instagram.com/thedesistuff","https://www.instagram.com/ahkshara__","https://www.instagram.com/soinnocentparent","https://www.instagram.com/akshitaa__","https://www.instagram.com/carrolllllllllll","https://www.instagram.com/ashvinpillai16","https://www.instagram.com/kanupriya___","https://www.instagram.com/3.1415926535897932384626433832","https://www.instagram.com/kaminari.artz","https://www.instagram.com/shawartma","https://www.instagram.com/trapstylewave","https://www.instagram.com/harshey21","https://www.instagram.com/cheesewithbroccoli","https://www.instagram.com/realshobhit98","https://www.instagram.com/pioneer_university","https://www.instagram.com/mehal.agarwal","https://www.instagram.com/melissafumero","https://www.instagram.com/krithika.lakshmi","https://www.instagram.com/drummerboiswaps","https://www.instagram.com/abhstagram_02","https://www.instagram.com/thewonkymonk","https://www.instagram.com/jay_gupta_","https://www.instagram.com/singer_suriya","https://www.instagram.com/parthivdedasaniya","https://www.instagram.com/vidurveer_duggal","https://www.instagram.com/shobin97","https://www.instagram.com/__kanupriya","https://www.instagram.com/vicehp","https://www.instagram.com/ananya_2207","https://www.instagram.com/adha_naan","https://www.instagram.com/preksha.99","https://www.instagram.com/devanshkoppar","https://www.instagram.com/aru_17_610","https://www.instagram.com/__sundaram_manickam__","https://www.instagram.com/nethingne2019","https://www.instagram.com/meow99.5","https://www.instagram.com/_maya_malhotra_","https://www.instagram.com/sarvashmalani","https://www.instagram.com/ntumodelun","https://www.instagram.com/kabilan_1503","https://www.instagram.com/muskaangoyal77","https://www.instagram.com/mariamhafeez_","https://www.instagram.com/nishkakhendry","https://www.instagram.com/priyasha__012","https://www.instagram.com/sammxy._","https://www.instagram.com/varun.245","https://www.instagram.com/anoushka_aggarwal","https://www.instagram.com/gujjuboiswaps","https://www.instagram.com/aishiknagar","https://www.instagram.com/mohammadyusufhasan","https://www.instagram.com/raghavvmantri","https://www.instagram.com/amritaravishankar","https://www.instagram.com/anushadatta","https://www.instagram.com/radhika_1999","https://www.instagram.com/vivek_adrakatti_","https://www.instagram.com/pranevsharma","https://www.instagram.com/_purwar_","https://www.instagram.com/ritwik_kanodia","https://www.instagram.com/arjunvaish25","https://www.instagram.com/rahul_baldewa","https://www.instagram.com/b._.enita","https://www.instagram.com/mundhradivyesh","https://www.instagram.com/rajagopal_iyer","https://www.instagram.com/arnavvsingh_","https://www.instagram.com/sam.ag_265","https://www.instagram.com/not_swathi","https://www.instagram.com/praharshita_josyula","https://www.instagram.com/mehulk_","https://www.instagram.com/vishal.raj23","https://www.instagram.com/atreya_sridhar","https://www.instagram.com/whiskeythegoodestboy","https://www.instagram.com/sharvarigupta","https://www.instagram.com/jeswin17","https://www.instagram.com/realrohanroy","https://www.instagram.com/memezar","https://www.instagram.com/studentproblems","https://www.instagram.com/call_me_firas","https://www.instagram.com/subikmuthu2","https://www.instagram.com/mr.foodventures","https://www.instagram.com/ramajoshi_","https://www.instagram.com/jassimshan","https://www.instagram.com/omaaar_khan","https://www.instagram.com/chhavi.aggarwal","https://www.instagram.com/mohammedsiddiq86126","https://www.instagram.com/ntumemes.2","https://www.instagram.com/saviyasaachi","https://www.instagram.com/thentumemes","https://www.instagram.com/smartindianboy","https://www.instagram.com/theironicalbaba","https://www.instagram.com/atharvawoody","https://www.instagram.com/inas_shaikh","https://www.instagram.com/sruthisudhakaran","https://www.instagram.com/swanand.gaikwad","https://www.instagram.com/saumya.sh","https://www.instagram.com/tanmaybhat","https://www.instagram.com/hithallii","https://www.instagram.com/isaacstar_","https://www.instagram.com/binuraniranjit","https://www.instagram.com/sarvesh_tusnial","https://www.instagram.com/lee.and.er","https://www.instagram.com/hellicalghoul","https://www.instagram.com/alwyn018","https://www.instagram.com/hurryyy.sshhh","https://www.instagram.com/gulshan_fathima","https://www.instagram.com/milkweedz","https://www.instagram.com/pranavsriram","https://www.instagram.com/aisshhhhh","https://www.instagram.com/namitak6","https://www.instagram.com/reshmaajith__23","https://www.instagram.com/diksha_gupta21","https://www.instagram.com/akshay_prem","https://www.instagram.com/shantanukamath","https://www.instagram.com/vidursharmaa","https://www.instagram.com/jannat.bedi","https://www.instagram.com/fahim_ft9","https://www.instagram.com/bala_3412q","https://www.instagram.com/shashwatjhunjhunwala","https://www.instagram.com/saurabh.mudgal","https://www.instagram.com/singhpriyanshu5","https://www.instagram.com/tanak_b","https://www.instagram.com/mnv.mhr","https://www.instagram.com/siddhu36","https://www.instagram.com/nikitha_anand","https://www.instagram.com/nikhil.venkatesh96","https://www.instagram.com/inazuma.artz","https://www.instagram.com/chocolate_killer_forever","https://www.instagram.com/nikhita_99","https://www.instagram.com/myo_thk","https://www.instagram.com/800idk","https://www.instagram.com/glmrbook","https://www.instagram.com/surabhi_malani","https://www.instagram.com/goforpuns","https://www.instagram.com/mrinalinibose","https://www.instagram.com/suyashlakhotia","https://www.instagram.com/dikshita_aggarwal","https://www.instagram.com/ahsraviman","https://www.instagram.com/chopra_virat","https://www.instagram.com/ash.sriv","https://www.instagram.com/siddhant_apte","https://www.instagram.com/nayeem159","https://www.instagram.com/subrasub","https://www.instagram.com/aanavi07","https://www.instagram.com/surabhiiiiiixd","https://www.instagram.com/tanoo.joyekurun","https://www.instagram.com/allindiabakchod","https://www.instagram.com/zakirkhan_208","https://www.instagram.com/nik_nikster","https://www.instagram.com/kavya_kasiram","https://www.instagram.com/bhuvan.bam22","https://www.instagram.com/mujahidkhan1","https://www.instagram.com/deadbilliards","https://www.instagram.com/pvijaikr","https://www.instagram.com/mayanknariani","https://www.instagram.com/chikurockzzz","https://www.instagram.com/ayesh185","https://www.instagram.com/saranya.x","https://www.instagram.com/kabhikabhi_aditii","https://www.instagram.com/benison_12","https://www.instagram.com/anu_diesel","https://www.instagram.com/just_in_chaos","https://www.instagram.com/sankalp_satsangi","https://www.instagram.com/guneetsk99","https://www.instagram.com/_vansh_grover","https://www.instagram.com/sahilbhatiani","https://www.instagram.com/shan__shar","https://www.instagram.com/nasreen2426","https://www.instagram.com/_ashraf_a.s","https://www.instagram.com/minisouuu","https://www.instagram.com/rain.akv","https://www.instagram.com/atishay___jain","https://www.instagram.com/debashreeaddi","https://www.instagram.com/its.kuns","https://www.instagram.com/dhyan_bohra","https://www.instagram.com/shreya210599","https://www.instagram.com/bhagwat_jr","https://www.instagram.com/parthtanejaa","https://www.instagram.com/kanangill","https://www.instagram.com/shivalagar_2410","https://www.instagram.com/uknowwhouare223","https://www.instagram.com/raksh_inaflash","https://www.instagram.com/mannan.kant","https://www.instagram.com/magansamridhi","https://www.instagram.com/__j00__j00__","https://www.instagram.com/ysjadhav183","https://www.instagram.com/yasaausman","https://www.instagram.com/anveshaa_","https://www.instagram.com/shahidh16","https://www.instagram.com/masi.sid","https://www.instagram.com/sharan_rajeev","https://www.instagram.com/abhi_singh_wazir","https://www.instagram.com/abdullah_misbah","https://www.instagram.com/__.suriya.__","https://www.instagram.com/shrinjalsingh","https://www.instagram.com/a2yet","https://www.instagram.com/visheee.e","https://www.instagram.com/redefined_swag","https://www.instagram.com/steevanseb","https://www.instagram.com/khadijapetladi","https://www.instagram.com/devanshishaarma","https://www.instagram.com/shoaafroz","https://www.instagram.com/rayrayiscraycray__","https://www.instagram.com/_kishbish_","https://www.instagram.com/rahul111999","https://www.instagram.com/maazahmad7","https://www.instagram.com/manuhari10","https://www.instagram.com/sachchitsajeev","https://www.instagram.com/sandeepphotography","https://www.instagram.com/rahulcherian_99","https://www.instagram.com/daanishlodhi","https://www.instagram.com/tabithagomes","https://www.instagram.com/john67921","https://www.instagram.com/arsh125518","https://www.instagram.com/aimanchogule","https://www.instagram.com/bazinga_xp_26","https://www.instagram.com/sayantanroy7","https://www.instagram.com/ace.gautam","https://www.instagram.com/hanan_dl1","https://www.instagram.com/zahaan99","https://www.instagram.com/sukanyavenkat7","https://www.instagram.com/abhilashaa1","https://www.instagram.com/chocoholic_2000","https://www.instagram.com/tonyxvr","https://www.instagram.com/chachu_98","https://www.instagram.com/orangutanonatree","https://www.instagram.com/gayathripullare","https://www.instagram.com/shrutisridhar","https://www.instagram.com/addipankh"]


def get_name(url):
    
    i = len(url)-1
    target_index = i
    for i in range(target_index,-1,-1):
        if url[i]=="/":
            break
    
    return url[i+1:]

def write_to_csv(json_data, file_name):
    with open(file_name, "w") as myFile:
        keys = list(json_data[0].keys())
        # print(keys)
        # myFile.write(",".join(keys)+"\n")
        for row in json_data:
            row_csv = ''
            for key in keys:
                row_csv += '"' + str(row[key]).replace('"', '""') + '",'
            myFile.write(row_csv[:-1]+"\n")

def wait_for_element(selected_type, location, time, driver):
    types = {"name": By.NAME, "id": By.ID,
             "xpath": By.XPATH, "tag": By.TAG_NAME}
    element = WebDriverWait(driver, time).until(
        EC.presence_of_element_located((types[selected_type], location)))
    return element

follower_data = []

# for profile in links:
#     driver.get(profile)
#     profile_info_xpath = "/html/body/div[1]/section/main/div/header/section/ul"
#     profile_info_ul = wait_for_element("xpath",profile_info_xpath,5,driver)
#     profile_json = {"posts":None,"followers":None,"following":None}
#     data = profile_info_ul.find_elements_by_tag_name("li")
#     profile_json["posts"] = data[0].get_attribute("innerText").split(" ")[0]
#     profile_json["followers"] = data[1].get_attribute("innerText").split(" ")[0]
#     profile_json["following"] = data[2].get_attribute("innerText").split(" ")[0]
#     follower_data.append(profile_json)

# write_to_csv(follower_data,"profile-data.csv")
with open("profile-data.csv","r") as my_file:
    profile_data = list(csv.reader(my_file))
    new_profile_data = []
    for i in range(len(profile_data)-1):
        data = profile_data[i+1]
        new_profile = {"username":None,"posts":None,"followers":None,"following":None}
        new_profile["username"] = get_name(links[i])
        new_profile["posts"] = data[0]
        new_profile["followers"] = data[1]
        new_profile["following"] = data[2]
        new_profile_data.append(new_profile)
    
    write_to_csv(new_profile_data,"user_data.csv")